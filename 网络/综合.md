# 输入ping IP后敲回车，发包前会发生什么  
首先根据目的IP和路由表决定走哪个网卡，再根据网卡的子网掩码地址判断目的IP是否在子网内。ping目标ip时，如果在相同网段直接先查询arp缓存，如果找到目标ip的mac地址，直接发送出去，如果缓存中查不到，则从相同网段的网卡发arp问目标ip的mac地址，拿到mac地址后发送出去。如果不在主机的网段里，会查询默认网关ip，接着查询arp缓存，是否有网关的mac地址记录，如果有，填充该mac地址，发送出去，如果没有，发arp问网关的mac地址，得到结果，发送出去。同时mac地址也会被arp缓存起来。  

#  浏览器输入网址打开一个网页会经历哪些过程？  
1. 浏览器解析出域名，然后通过DNS查询这个域名的IP地址  
**域名解析**：通过读取配置文件获得DNS服务器的IP地址，然后将控制权传给内核的UDP模块。UDP模块将DNS查询报文封装成UDP报文，并将源端口、目的端口加入UDP数据包头部。然后UDP模块调用IP服务。IP模块则将UDP报文封装成IP数据报，并将源端、目的端IP地址加入IP数据报头部。接下来IP模块查询路由表以决定如何发送该IP数据报（主机在同一子网还是发给默认网关）。**ARP解析**如果ARP缓存中有目标IP的mac地址，则直接发。如果没有则广播ARP请求（以太网帧）,拿到Mac地址后发出去，同时将该地址缓存起来。  
2. 浏览器获得端口号  
3. 浏览器发起到ip：端口的连接  
TCP三次握手  
4. 浏览器向服务器发送一条HTTP请求报文  
5. 浏览器从服务器读取HTTP响应报文  
6. 浏览器关闭连接  
