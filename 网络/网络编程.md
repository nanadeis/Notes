# C/S模型  
服务器分为IO单元和逻辑单元  
IO单元通常是IO复用技术  
逻辑单元通常是多线程或者多进程  


# Reactor 模式  
主线程只负责监听文件描述符上是否有事件发生，有的话立刻将该事件通知工作线程。如此之外，主线程不做任何实质性的工作。读写数据，接受新的连接，以及处理客户请求均在工作线程中完成  


# Proactor 模式  
Proactor模式将所有IO操作都交给主线程和内核来处理，工作线程仅仅负责业务逻辑  
使用异步IO实现的proactor模式的工作流程：  
1. 主线程调用aio_read函数向内核注册socket上的读写完成事件，并告诉内核用户读缓冲区的位置，以及读操作完成时如何通知应用程序  
2. 主线程继续处理其他逻辑  
3. 当socket上的数据被读入用户缓冲区后，内核将向应用程序发送一个信号，以通知应用程序数据已经可用  
4. 应用程序预先定义好的信号处理程序选择一个工作线程来处理客户请求。工作线程处理完客户请求后，调用aio_write函数向内核注册socket写时间，并告诉内核用户写缓冲区的位置，以及写操作完成时如何通知应用程序  
5. 主线程继续处理其他逻辑  
6. 当用户缓冲区的数据被写入socket后，内核向应用程序发送一个信号，以通知应用程序数据已经发送完毕  
7. 应用程序预先定义好的信号处理函数选择一个工作线程来做善后处理，比如决定是否关闭socket  

# one event per loop  
