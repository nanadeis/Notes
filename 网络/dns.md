DNS是一个分布式的客户机/服务器网络数据库，是应用程序    
gethostbyname（）会调用DNS查询  
所有DNS请求和回答报文使用UDP数据报经过端口53发送  
完整的域名如baidu.com.这样以空标签结束（或者说以.结束）因为根节点时空的，从下到上读      

# 域名解析过程  
1. 在浏览器中输入www.qq.com
2. 检查本地的hosts文件是否有这个域名的映射  
3. 查找本地DNS缓存  
4. 找TCP/IP参数中设置的首选DNS服务器，一般叫本地DNS服务器。此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则将解析结果给客户机，完成域名解析，此解析具有权威性  
5. 如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已经缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性  
6. 如果本地DNS服务器本地区域文件和缓存解析都失效，则根据本地DNS服务器的设置（是否设置了转发器）进行查询：
（1）如果未用转发模式，本地DNS（运营商TSP DNS）就把请求发至13台根DNS，根DNS收到请求后会判断这个域名（.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址（baidu。com)给本地DNS服务器，当本地DNS服务器收到这个地址后，就会找qq.com域服务器，重复上面的动作，进行查询，直到找到www.qq.com  
（2）如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级DNS服务器进行解析。如果上一级服务器不能解析，或找根DNS或把请求转至上上级，以此循环。
 

# 递归查询  
DNS服务器收到客户机请求，必须使用一个准确的查询结果回复客户机，如果DNS服务器本地没有存储查询DNS信息，那么该服务器会询问其他服务器，并将返回的查询结果提交给客户机  

# 迭代查询  
DNS服务器会向客户机提供其他能够解析查询请求的DNS服务器地址，当客户机发送查询请求时，DNS服务器并不直接回复查询结果，而是告诉客户机另一台DNS服务器地址，客户机再向这台DNS服务器提交请求，依次循环直到返回查询结果   

# DNS服务器一般分为三种：根DNS服务器、顶级DNS服务器，权威DNS服务器  
根域：DNS域名中使用时，规定由尾部局点（.）来指定名称位于根或更高级别的域层次结构    .
顶级域：用来指示某个国家/地区或组织使用的名称的类型名称    .com  
第二层域：个人或组织在Internet上使用的注册名称           qq.com  
子域：已注册的二级域名派生的域名，通俗的讲就是网站名      www.qq.com  
主机名：通常情况下，DNS域名的最左侧的标签标识网络上的特定计算机，如h1   h1.www.qq.com  

# 根域名只有13个



# 为什么使用UDP 
一次UDP名字服务器交换可以短到两个包：一个查询包、一个响应包。一次TCP交换则至少包含9个包：三次握手、一个查询包、一个响应包、四次挥手  

