# IO模型  
## 带缓冲的IO
## 不带缓冲的IO  

## 同步IO  
###非阻塞IO  
###阻塞IO
###I/O复用
###信号驱动式IO    
## 异步IO  


# close和shutdown的区别  
1. close把文件描述符计数值减1，只有该计数值变为0时，才关闭套接字。shutdown可以不管引用计数就激发TCP的四次挥手  
2. close终止读和写两个方向的数据传送。  
而shutdown(int sockfd, int howto)   
（1） howto为SHUT_RD 关闭读端，套接字接收缓冲区的现有数据都被丢弃。进程不能在对这个套接字调用任何读函数   
（2） howto为SHUT_WR 关闭写端，称为半关闭。当前发送缓冲区的数据将被发送掉，后跟TCP正常连接终止序列  
（3） howto为SHUT_RDWR 读写都关闭，相当于先调用SHUT_RD，再调用SHUT_WR  
注意，当接收缓冲区中有数据时调用close将产生FIN而不是FIN   


# 文件描述符  
PCB里有fd，文件指针  
文件指针指向文件表项（文件对象，file结构体），是已打开文件在内存中的表示，该对象由open（）创建，由close（）撤销，文件表项包括文件状态标志（O_READ、O_WRITE等）、文件对象的引用计数（两个独立的进程打开一个相同的文件，会有两个独立的文件对象；父子进程会指向同样一个文件对象，引用计数+1）、文件偏移量、f_dentry指向目录项     
linux没有v节点（v节点中的文件操作函数指针在文件对象里）  
f_dentry指向inode（索引节点）  
inode包含内核在操作文件或目录时需要的全部信息，可以有多个文件名指向同一个inode，实际只有一个文件：  
i_count 引用计数  
i_nlink 硬链接数  
使用 stat 可以查看文件的Inode号，链接数等信息   

# 链接  
文件的共享使用  
隐藏文件路径  
增加权限安全  
节省存储  

## 软链接（符号链接）  
ln/link -s source dist  
软链接有着自己的inode和data block（里面保存的是其代表文件的绝对路径，在访问时替换自身路径）  
创建软链接时，链接技术i_nlink不会增加   
可对不存在的文件或目录创建软链接  
可交叉文件系统  
删除软链接并不影响被指向的文件，但若被指向的原文件被删除，则相关软链接被称为死链接（dangling link），若被指向路径文件被重新创建，死链接可恢复为正常的软链接  


## 硬链接  
ln source dist   

特点：  
文件有相同的inode及data block（磁盘上）  
不可以对文件夹/目录建立硬链接（防止文件树上产生环）    
删除一个硬链接并不影响其他有相同inode号的文件  
不能交叉文件系统进行硬链接的创建  



# linux 删除文件的原理  
当某个进程打开了一个文件，此时用rm删除该文件，可以删除不会报错。用losf查看打开了该文件的进程，还能看到那个文件但是有个（delete）  
只有i_count和i_nlink同时为0才会删除硬盘上的data block   


# VFS和ext2文件系统  

